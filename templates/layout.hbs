<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ title }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />
  <link href="../styles/style.css" rel="stylesheet">

  <!-- Standard favicon.ico fallback -->
  <link rel="shortcut icon" href="/assets/favicons/favicon.ico" />

  <!-- Modern PNG favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" />

  <!-- Android/Chrome -->
  <link rel="manifest" href="/site.webmanifest" />

  <!-- iOS home-screen icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" />
    
  <!-- Optional: specify a theme color for Chrome on Android -->
  <meta name="theme-color" content="#FFFBEE" />
</head>
<body class="d-flex flex-column min-vh-100">
  {{> navbar }}
  <main class="flex-grow-1 container mt-0">
    {{{ body }}}
  </main>
  {{> footer }}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const current = window.location.pathname.split('/').pop() || 'index.html';
  const links = document.querySelectorAll('.navbar-nav .nav-link');
  links.forEach(link => {
    const href = link.getAttribute('href');
    if (href === current) {
      link.classList.add('active');
    }
  });
});

// Publication Show/Hide Long Summary
document.addEventListener('DOMContentLoaded', function () {
  // Only target toggles within publications to avoid other collapse components
  document.querySelectorAll('.publication [data-bs-toggle="collapse"]').forEach(function (toggle) {
    const targetSelector = toggle.getAttribute('href') || toggle.getAttribute('data-bs-target');
    if (!targetSelector) return;
    const targetEl = document.querySelector(targetSelector);
    if (!targetEl) return;
    const icon = toggle.querySelector('i');
    const text = toggle.querySelector('.toggle-text');
    
    targetEl.addEventListener('show.bs.collapse', function () {
      icon.classList.replace('fa-chevron-down', 'fa-chevron-up');
      if (text) text.textContent = 'Hide Long Summary';
    });

    targetEl.addEventListener('hide.bs.collapse', function () {
      icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
      if (text) text.textContent = 'Show Long Summary';
    });
  });
});
</script>
</body>
</html>
